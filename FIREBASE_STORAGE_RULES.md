# Firebase Storage Security Rules

## Current Situation

Your Firebase Storage rules are set to expire on **November 24, 2024**. After that date, all requests will be denied.

## Recommended Rules

Since you're using **signed URLs** for image access, here are the recommended rules:

### Option 1: Public Read, Authenticated Write (Recommended)

```javascript
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      // Allow public read - signed URLs provide authentication
      allow read: if true;
      
      // Only authenticated users can write
      allow write: if request.auth != null;
    }
  }
}
```

**Why this works:**
- ✅ Public read is safe because you're using signed URLs (they have built-in authentication)
- ✅ Prevents unauthorized uploads/deletes
- ✅ No expiration date needed

### Option 2: More Restrictive (If you want extra security)

```javascript
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Public read for all paths
    match /{allPaths=**} {
      allow read: if true;
    }
    
    // Only allow writes to specific paths by authenticated users
    match /default/uploads/{fileName} {
      allow write: if request.auth != null;
    }
    
    match /uploads/{allPaths=**} {
      allow write: if request.auth != null;
    }
  }
}
```

### Option 3: Temporary Extension (Quick Fix)

If you just need to extend the current temporary rules:

```javascript
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      // Extended expiration date
      allow read, write: if request.time < timestamp.date(2025, 12, 31);
    }
  }
}
```

⚠️ **Warning**: This is still insecure and should only be temporary!

## How to Update Rules

1. Go to [Firebase Console - Storage Rules](https://console.firebase.google.com/u/0/project/sempre-studios-893c8/storage/sempre-studios-893c8.appspot.com/rules)
2. Copy one of the rule sets above
3. Paste into the rules editor
4. Click **Publish**

## Important Notes

- **Signed URLs**: Since you're using signed URLs with authentication parameters, public read access is safe
- **Service Account**: Your service account (`firebase-adminsdk-gkp49`) can bypass these rules
- **Testing**: Use the Firebase Console's Rules Playground to test your rules before publishing

## Why Your Current Setup Works

Your images use signed URLs like:
```
https://storage.googleapis.com/...?GoogleAccessId=...&Expires=...&Signature=...
```

These URLs:
- ✅ Have built-in authentication (Signature parameter)
- ✅ Expire automatically (Expires parameter)
- ✅ Are generated by your service account

So allowing public read is safe because:
1. Only people with valid signed URLs can access files
2. URLs expire automatically
3. URLs can't be guessed or forged without the service account key

